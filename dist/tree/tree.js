define("components/tree",["jquery","underscore","components/base","brix/event"],function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_2__,__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_4__){return function(e){function t(i){if(n[i])return n[i].exports;var d=n[i]={exports:{},id:i,loaded:!1};return e[i].call(d.exports,d,d.exports,t),d.loaded=!0,d.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(2),__webpack_require__(3),__webpack_require__(4),__webpack_require__(5),__webpack_require__(6),__webpack_require__(7)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Brix,EventManager,Area,template,nodeTemplate){function Tree(){}function fix(e,t,n){e.contentFn=function(e){return e.content||_.template(n)(e)},e.childrenFn=function(){return this.children&&this.children.length?_.template(t)(this):""},_.each(e.children,function(e){fix(e,t,n)})}var NAMESPACE=".tree",STATE={PENDING:"pending",ACTIVE:"active",INACTIVE:"inactive"};return _.extend(Tree.prototype,Brix.prototype,{options:{data:void 0,nodeTemplate:void 0,state:"expand"},init:function(){var that=this,defer=$.Deferred(),deps=[],customNodeTemplate=this.options.nodeTemplate||this.options["node-template"];if(customNodeTemplate&&deps.push(customNodeTemplate),window.require(deps,function(){customNodeTemplate&&(that.options.customNodeTemplate=arguments[0]),defer.resolve()}),!this.options.data){$(this.element).find("script").remove();var text=$.trim(this.element.innerHTML);this.options.data=eval("(function(){ return Array.prototype.slice.call(arguments)[0] })("+text+")"),this.element.innerHTML=""}var mapped={};if(_.each(this.options.data,function(e){e&&e.id&&(null!=e.pid&&null==e.parentId&&(e.parentId=e.pid),null==e.pid&&null!=e.parentId&&(e.pid=e.parentId),mapped[e.id]=e)}),this.options.mapped=mapped,this.options.data={id:"root",name:"root",children:Area.tree(this.options.data)},deps.length)return defer.promise()},render:function(){var e=this,t=new EventManager;this.$element=$(this.element),fix(this.options.data,template,this.options.customNodeTemplate||nodeTemplate),this.$element.append(_.template(template)(this.options.data)),t.delegate(this.$element,this),"collapse"===this.options.state&&this.collapse(),"expand"===this.options.state&&this.expand();var n="click"+NAMESPACE+"_"+this.clientId;this._state=STATE.INACTIVE,$(document.body).off(n).on(n,function(t){if(t.target===e.element||$.contains(e.element,t.target)||!t.target.parentNode){if(e._state===STATE.ACTIVE)return;return e.trigger($.Event("active"+NAMESPACE,{target:t.target})),void(e._state=STATE.ACTIVE)}e._state!==STATE.INACTIVE&&(e.trigger($.Event("inactive"+NAMESPACE,{target:t.target})),e._state=STATE.INACTIVE)})},toggle:function(e,t){e.stopPropagation();var n;n=void 0===e?"li[data-node-id]":e.type?'li[data-node-id="'+t+'"]':'li[data-node-id="'+e+'"]',$(n,this.$element).find("> .tree-node-control .brixfont").toggle().end().find("> ul.tree").slideToggle("fast")},expand:function(e){var t;t=void 0===e?"li[data-node-id]":'li[data-node-id="'+e+'"]';var n=this.options.mapped;void 0!==e&&n[e]&&n[e].parentId&&this.expand(n[e].parentId);var i=$(t,this.$element).show().find("> .tree-node-control .brixfont.plus-sign").hide().end().find("> .tree-node-control .brixfont.minus-sign").show().end();void 0===e?i.find("> ul.tree").show():i.find("> ul.tree").slideDown("fast")},collapse:function(e){var t;t=void 0===e?"li[data-node-id]":'li[data-node-id="'+e+'"]';var n=$(t,this.$element).show().find("> .tree-node-control .brixfont.plus-sign").show().end().find("> .tree-node-control .brixfont.minus-sign").hide().end();void 0===e?n.find("> ul.tree").hide():n.find("> ul.tree").slideUp("fast")},search:function(e){function t(e,n){_.each(e.children,function(e){n.push(e),t(e,n)})}function n(e,t){var n=new RegExp(t,"ig");_.each($(".tree-node-content-name",e),function(e){var t=$(e);t.html(t.text().replace(n,function(e){return'<span class="highlight">'+e+"</span>"}))})}if(void 0!==e){var i=this;$("li[data-node-id]",this.$element).hide();var d=[];_.each(this.options.mapped,function(n){n.name.toLowerCase().indexOf(e.toLowerCase())!==-1&&(d.push(n),t(n,d))}),_.each(_.uniq(d),function(e){i.expand(e.id)}),n(this.$element,e)}},current:function(e){if(e){var t,n=this.options.mapped,i={},d=e.jquery?e.attr("data-node-id"):e.nodeType?$(e).attr("data-node-id"):e;if(d&&n[d])return t='li[data-node-id="'+d+'"]',i.data=n[d],i.element=$(t,this.$element).find("> .tree-node-control > .tree-node-content")[0],i}},parent:function(e){if(e){var t,n,i=this.options.mapped,d={},a=e.jquery?e.attr("data-node-id"):e.nodeType?$(e).attr("data-node-id"):e;if(a&&i[a]&&i[a].parentId&&i[i[a].parentId])return t=i[a].parentId,n='li[data-node-id="'+t+'"]',d.data=i[t],d.element=$(n,this.$element).find("> .tree-node-control > .tree-node-content")[0],d}},children:function(e){if(e){var t,n=this,i=this.options.mapped,d=[],a=e.jquery?e.attr("data-node-id"):e.nodeType?$(e).attr("data-node-id"):e;return a&&i[a]&&i[a].children&&i[a].children.length?(_.each(i[a].children,function(e){t='li[data-node-id="'+e.id+'"]',d.push({data:i[e.id],element:$(t,n.$element).find("> .tree-node-control > .tree-node-content")[0]})}),d):d}},siblings:function(e){if(e){var t=this,n=this.options.mapped,i=e.jquery?e.attr("data-node-id"):e.nodeType?$(e).attr("data-node-id"):e,d=this.parent(e),a=[];if(d)a=this.children(d.element);else{if(!i||!n[i])return[];var o,r=n[i].parentId;_.each(n,function(e){e.parentId===r&&(o='li[data-node-id="'+e.id+'"]',a.push({data:e,element:$(o,t.$element).find("> .tree-node-control > .tree-node-content")[0]}))})}var p=[];return _.each(a,function(e){e.data.id!==i&&p.push(e)}),p}},all:function(){var e,t=this,n=this.options.mapped,i=[];return _.each(n,function(d){e='li[data-node-id="'+d.id+'"]',i.push({data:n[d.id],element:$(e,t.$element).find("> .tree-node-control > .tree-node-content")[0]})}),i},forward:function(e,t){e.stopPropagation();var n=$.Event(e.type+NAMESPACE,{target:e.target,currentTarget:e.currentTarget});this.trigger(n,[this.options.mapped[t],e.currentTarget])},destroy:function(){var e="click"+NAMESPACE+"_"+this.clientId;$(document.body).off(e)}}),Tree}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(e,t,n){var i,d;i=[n(2)],d=function(e){function t(t){var n={};e.each(t,function(e){e&&e.id&&(n[e.id]=e)});var i=[];return e.each(t,function(e){if(e){if(void 0==e.pid&&void 0==e.parentId)return void i.push(e);var t=n[e.pid]||n[e.parentId];t&&(t.children||(t.children=[]),t.children.push(e))}}),i}var n=[{id:"一线",name:"一线"},{id:"二线",name:"二线"},{id:"三线",name:"三线"},{id:11e4,pid:"一线",name:"北京市"},{id:12e4,pid:"一线",name:"天津市"},{id:13e4,pid:"二线",name:"河北省"},{id:14e4,pid:"二线",name:"山西省"},{id:15e4,pid:"三线",name:"内蒙古自治区"},{id:21e4,pid:"三线",name:"辽宁省"}],i=[{id:"华北",name:"华北"},{id:"东北",name:"东北"},{id:"华东",name:"华东"},{id:"华南",name:"华南"},{id:"华中",name:"华中"},{id:"西南",name:"西南"},{id:"西北",name:"西北"},{id:"港澳台",name:"港澳台"},{id:11e4,pid:"华北",name:"北京市"},{id:12e4,pid:"华北",name:"天津市"},{id:13e4,pid:"华北",name:"河北省"},{id:14e4,pid:"华北",name:"山西省"},{id:15e4,pid:"华北",name:"内蒙古自治区"},{id:21e4,pid:"东北",name:"辽宁省"},{id:22e4,pid:"东北",name:"吉林省"},{id:23e4,pid:"东北",name:"黑龙江省"},{id:31e4,pid:"华东",name:"上海市"},{id:32e4,pid:"华东",name:"江苏省"},{id:33e4,pid:"华东",name:"浙江省"},{id:34e4,pid:"华东",name:"安徽省"},{id:35e4,pid:"华东",name:"福建省"},{id:36e4,pid:"华东",name:"江西省"},{id:37e4,pid:"华东",name:"山东省"},{id:41e4,pid:"华中",name:"河南省"},{id:42e4,pid:"华中",name:"湖北省"},{id:43e4,pid:"华中",name:"湖南省"},{id:44e4,pid:"华南",name:"广东省"},{id:45e4,pid:"华南",name:"广西壮族自治区"},{id:46e4,pid:"华南",name:"海南省"},{id:5e5,pid:"西南",name:"重庆市"},{id:51e4,pid:"西南",name:"四川省"},{id:52e4,pid:"西南",name:"贵州省"},{id:53e4,pid:"西南",name:"云南省"},{id:54e4,pid:"西南",name:"西藏自治区"},{id:61e4,pid:"西北",name:"陕西省"},{id:62e4,pid:"西北",name:"甘肃省"},{id:63e4,pid:"西北",name:"青海省"},{id:64e4,pid:"西北",name:"宁夏回族自治区"},{id:65e4,pid:"西北",name:"新疆维吾尔自治区"},{id:71e4,pid:"港澳台",name:"台湾省"},{id:81e4,pid:"港澳台",name:"香港特别行政区"},{id:82e4,pid:"港澳台",name:"澳门特别行政区"}],d={};return{REGION:i,TIER:n,IPDATA:d,tree:t}}.apply(t,i),!(void 0!==d&&(e.exports=d))},function(e,t,n){var i;i=function(){return'<ul class="tree">\n    <% for(var i = 0, item; item = children[i]; i++ ) { %>\n        <li data-node-id="<%= item.id %>" class="tree-node <%= item.children && item.children.length ? \'\': \'tree-leaf\' %>">\n            <div class="tree-node-control clearfix">\n                <div class="tree-node-toggle" bx-click="toggle(\'<%= item.id %>\')">\n                    <span class="brixfont plus-sign">&#xe61f;</span>\n                    <span class="brixfont minus-sign">&#xe620;</span>\n                </div>\n                <div data-node-id="<%= item.id %>" class="tree-node-content" bx-click="forward(\'<%= item.id %>\')" bx-mouseenter="forward(\'<%= item.id %>\')" bx-mouseleave="forward(\'<%= item.id %>\')">\n                    <%= contentFn(item) %>\n                </div>\n            </div>\n            <%= item.childrenFn() %>\n        </li>\n    <% } %>\n</ul>'}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(){return'<span class="tree-node-content-name"><%= name %></span>'}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}])});