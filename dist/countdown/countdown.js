define("components/countdown",["jquery","underscore","moment","brix/base"],function(t,n,s,e){return function(t){function n(e){if(s[e])return s[e].exports;var o=s[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var s={};return n.m=t,n.c=s,n.p="",n(0)}([function(t,n,s){var e,o;e=[s(1),s(2),s(3),s(4),s(5)],o=function(t,n,s,e,o){function i(){}n.extend(i.prototype,e.prototype,{options:{precision:500,expires:new Date},render:function(){this.options.expires=s(this.options.expires).toDate(),this.data=this.data||n.extend({},this.options);var e=n.template(o)(this.data),i=t(this.element);i.append(e),this.start()},start:function(){function n(){var t=s.update();return 0===t.total&&(r.pop(s.task,s.options.precision),s.trigger("complete.countdown",t)),n}var s=this;return this.trigger("start.countdown",this.offset()),this.task=n,this.on("complete.countdown",function(){t(s.element).addClass("is-complete")}),r.push(n(),this.options.precision),this},stop:function(){return this.options.expires=new Date,r.pop(this.task(),this.options.precision),this},pause:function(){return this.trigger("pause.countdown",this.offset()),r.pop(this.task,this.options.precision),this},resume:function(){return this.trigger("resume.countdown",this.offset()),r.push(this.task(),this.options.precision),this},update:function(){function n(t,n){switch(n=n||2){case 2:return t<10?"0"+t:t;case 3:return t<10?"00"+t:t<100?"0"+t:t}}var s=this.offset();return t(this.element).find(".totalDays").text(n(s.totalDays)).end().find(".hours").text(n(s.hours)).end().find(".minutes").text(n(s.minutes)).end().find(".seconds").text(n(s.seconds)).end(),this.trigger("update.countdown",s),s},offset:function(){var t=this.options.expires,n=t.getTime()-(new Date).getTime();n=Math.ceil(n/1e3),n=n<0?0:n;var s={total:n,seconds:n%60,minutes:Math.floor(n/60)%60,hours:Math.floor(n/60/60)%24,days:Math.floor(n/60/60/24)%7,totalDays:Math.floor(n/60/60/24),weeks:Math.floor(n/60/60/24/7),months:Math.floor(n/60/60/24/30),years:Math.floor(n/60/60/24/365)};return s}});var r={push:function(t,n){this.timers=this.timers||{},this.timers[n]=this.timers[n]||[],this.timers[n].push(t),this.run()},pop:function(t,n){var s=this.timers;if(s&&s[n])for(var e=0;e<s[n].length;e++)s[n][e]===t&&s[n].splice(e--,1)},run:function(){n.each(this.timers,function(t,s){return t.length?void(t.timer||(t.timer=setInterval(function(){n.each(t,function(t){t&&t()})},s))):void clearInterval(t.timer)})}};return i}.apply(n,e),!(void 0!==o&&(t.exports=o))},function(n,s){n.exports=t},function(t,s){t.exports=n},function(t,n){t.exports=s},function(t,n){t.exports=e},function(t,n,s){var e;e=function(){return'<div class="countdown">\n    <span class="totalDays">00</span> 天\n    <span class="hours"    >00</span> 时\n    <span class="minutes"  >00</span> 分\n    <span class="seconds"  >00</span> 秒\n</div>'}.call(n,s,n,t),!(void 0!==e&&(t.exports=e))}])});