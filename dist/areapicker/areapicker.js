define("components/areapicker",["jquery","underscore","brix/base"],function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_2__,__WEBPACK_EXTERNAL_MODULE_3__){return function(e){function n(a){if(i[a])return i[a].exports;var t=i[a]={exports:{},id:a,loaded:!1};return e[a].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var i={};return n.m=e,n.c=i,n.p="",n(0)}([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(2),__webpack_require__(3),__webpack_require__(4),__webpack_require__(5),__webpack_require__(6)],__WEBPACK_AMD_DEFINE_RESULT__=function($,_,Brix,linkage,Area,template){function AreaPicker(){}return _.extend(AreaPicker.prototype,Brix.prototype,{options:{type:"TIER",data:void 0},init:function(){if(!this.options.data){var text=$.trim(this.element.innerText);this.options.data=eval("(function(){ return Array.prototype.slice.call(arguments)[0] })("+text+")"),this.element.innerText=""}this.options.data={id:"root",name:"全部选择",children:Area.tree(this.options.data||Area.REGION)}},render:function(){var e=this;this.$element=$(this.element);var n=_.template(template)(this.options.data);this.$element.append(n),linkage(this.$element,function(n,i,a){e.trigger("toggle.areapicker",[i,a])})}}),AreaPicker}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,n){e.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(e,n){e.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(e,n){e.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(e,n,i){var a,t;a=[i(1),i(2)],t=function(e,n){function i(n,c){var _=e(n),l="["+o+"],["+p+"]";return a(_,l),e(n).on("change.linkage",l,function(a){if(a.target===a.currentTarget){var o=e(a.currentTarget);t(o,_),r(o,_),d(o,_),c&&c(a,i.val(n),a.currentTarget)}}),i}function a(i,a){var t=i.find(a);n.each(t,function(i){var a=e(i),t=a.attr(o),r=a.attr(p);t===r&&(console.warn(new Error(n.template('<%= a %> and <%= b %> have save value "<%= value %>", may cause the Linkage to recursive search. You should avoid this kind of code.')({a:o,b:p,value:t})).stack),console.warn(i))})}function t(i,a){var r=i.attr(o),d=i.attr(p);if(d&&r!==d){var c=a.find(n.template(_)({name:d}));if(c.length){var u=a.find(n.template(l)({name:d}));if(u.length){var m=u.filter(":checkbox"),h=[];n.each(m,function(e){h.push(!e.indeterminate&&e.checked)});var f=e(n.filter(m,function(e){return e.indeterminate})),v=u.filter(":radio"),s=n.uniq(n.map(v,function(n){return e(n).attr("name")})),E=[];n.each(s,function(e){e&&E.push(!!v.filter('[name="'+e+'"]:checked').length)});var k=n.uniq(h.concat(E));c.prop("indeterminate",!!f.length||2===k.length).prop("checked",!f.length&&(1===k.length&&k[0])),t(c,a)}}}}function r(i,a){var t=i.attr(o),d=i.attr(p),c=i.prop("checked");if(t&&t!==d){var _=a.find(n.template(l)({name:t}));if(_.length){var u=_.not(":disabled");if(u.length){var m=u.filter(":checkbox");m.prop("checked",c);var h=u.filter(":radio");if(c||h.prop("checked",c),c){var f=n.uniq(n.map(h,function(n){return e(n).attr("name")}));n.each(f,function(i){if(i){var a=h.filter('[name="'+i+'"]');if(a.length){var t=n.map(a,function(n){return e(n).prop("checked")});n.indexOf(t,c)===-1&&a.eq(0).prop("checked",c)}}})}n.each(_,function(n){r(e(n),a)})}}}}function d(i,a){if(i.is(":radio")){var d=i.attr("name"),c=a.find('[name="'+d+'"]').not(i);n.each(c,function(n){var i=e(n);t(i,a),r(i,a)})}}var c="data-linkage-",o=c+"name",p=c+"parent-name",_="["+o+'="<%= name %>"]',l="["+p+'="<%= name %>"]';return i.off=function(n){var a=e(n),t="["+o+"],["+p+"]";return a.off("click.linkage",t),i},i.val=function(a,d){var c=e(a);if(d){var o=c.find("input:checkbox, input:radio").not(":disabled").prop("checked",!1);return n.each(d,function(i){var a=o.filter('[value="'+i+'"]').prop("checked",!0);n.each(a,function(n){t(e(n),c),r(e(n),c)})}),i}d=[];var p=c.find("input:checkbox:checked, input:radio:checked");return n.each(p,function(n){var i=e(n).attr("value");void 0!==i&&""!==i&&d.push(i)}),d},i}.apply(n,a),!(void 0!==t&&(e.exports=t))},function(e,n,i){var a,t;a=[i(2)],t=function(e){function n(n){var i={};e.each(n,function(e){e&&e.id&&(i[e.id]=e)});var a=[];return e.each(n,function(e){if(e){if(void 0==e.pid&&void 0==e.parentId)return void a.push(e);var n=i[e.pid]||i[e.parentId];n&&(n.children||(n.children=[]),n.children.push(e))}}),a}var i=[{id:"一线",name:"一线"},{id:"二线",name:"二线"},{id:"三线",name:"三线"},{id:11e4,pid:"一线",name:"北京市"},{id:12e4,pid:"一线",name:"天津市"},{id:13e4,pid:"二线",name:"河北省"},{id:14e4,pid:"二线",name:"山西省"},{id:15e4,pid:"三线",name:"内蒙古自治区"},{id:21e4,pid:"三线",name:"辽宁省"}],a=[{id:"华北",name:"华北"},{id:"东北",name:"东北"},{id:"华东",name:"华东"},{id:"华南",name:"华南"},{id:"华中",name:"华中"},{id:"西南",name:"西南"},{id:"西北",name:"西北"},{id:"港澳台",name:"港澳台"},{id:11e4,pid:"华北",name:"北京市"},{id:12e4,pid:"华北",name:"天津市"},{id:13e4,pid:"华北",name:"河北省"},{id:14e4,pid:"华北",name:"山西省"},{id:15e4,pid:"华北",name:"内蒙古自治区"},{id:21e4,pid:"东北",name:"辽宁省"},{id:22e4,pid:"东北",name:"吉林省"},{id:23e4,pid:"东北",name:"黑龙江省"},{id:31e4,pid:"华东",name:"上海市"},{id:32e4,pid:"华东",name:"江苏省"},{id:33e4,pid:"华东",name:"浙江省"},{id:34e4,pid:"华东",name:"安徽省"},{id:35e4,pid:"华东",name:"福建省"},{id:36e4,pid:"华东",name:"江西省"},{id:37e4,pid:"华东",name:"山东省"},{id:41e4,pid:"华中",name:"河南省"},{id:42e4,pid:"华中",name:"湖北省"},{id:43e4,pid:"华中",name:"湖南省"},{id:44e4,pid:"华南",name:"广东省"},{id:45e4,pid:"华南",name:"广西壮族自治区"},{id:46e4,pid:"华南",name:"海南省"},{id:5e5,pid:"西南",name:"重庆市"},{id:51e4,pid:"西南",name:"四川省"},{id:52e4,pid:"西南",name:"贵州省"},{id:53e4,pid:"西南",name:"云南省"},{id:54e4,pid:"西南",name:"西藏自治区"},{id:61e4,pid:"西北",name:"陕西省"},{id:62e4,pid:"西北",name:"甘肃省"},{id:63e4,pid:"西北",name:"青海省"},{id:64e4,pid:"西北",name:"宁夏回族自治区"},{id:65e4,pid:"西北",name:"新疆维吾尔自治区"},{id:71e4,pid:"港澳台",name:"台湾省"},{id:81e4,pid:"港澳台",name:"香港特别行政区"},{id:82e4,pid:"港澳台",name:"澳门特别行政区"}],t={};return{REGION:a,TIER:i,IPDATA:t,tree:n}}.apply(n,a),!(void 0!==t&&(e.exports=t))},function(e,n,i){var a;a=function(){return'<div class="areapicker">\n    <div class="areapicker-header dialog-header">\n        <h4 class="areapicker-header-title dialog-title">选择地域</h4>\n    </div>\n    <div class="areapicker-body">\n        <table class="table table-bordered">\n            <thead>\n                <tr>\n                    <th>区域</th>\n                    <th>\n                        省份/城市\n                        <label class="areapicker-header-toggle" style="vertical-align: bottom; margin-left: 10px;">\n                            <input type="checkbox" data-linkage-name="<%= id %>">\n                            <%= name %>\n                        </label>\n                    </th>\n                </tr>\n            </thead>\n            <tbody>\n                <% for ( var i = 0; i < children.length; i++ ) { %>\n                <tr>\n                    <td width="100">\n                        <label>\n                            <input type="checkbox" \n                                value="<%= children[i].id %>"\n                                data-linkage-name="<%= children[i].id %>"\n                                data-linkage-parent-name="<%= id %>">\n                            <%= children[i].name %>\n                        </label>\n                    </td>\n                    <td>\n                        <% for ( var ii = 0; ii < children[i].children.length; ii++ ) { %>\n                        <label>\n                            <input type="checkbox" \n                                value="<%= children[i].children[ii].id %>"\n                                data-linkage-name="<%= children[i].children[ii].id %>" \n                                data-linkage-parent-name="<%= children[i].id %>">\n                            <%= children[i].children[ii].name %>\n                        </label>\n                        <% } %>\n                    </td>\n                </tr>\n                <% } %>\n            </tbody>\n        </table>\n    </div>\n</div>'}.call(n,i,n,e),!(void 0!==a&&(e.exports=a))}])});