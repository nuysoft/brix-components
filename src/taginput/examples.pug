doctype html
html
    head
        include ../../doc/head.pug
    body
        //- 示例
        div
            input.form-control(bx-name='components/taginput')
        div
            h3.fontsize-16 通过 HTML 属性 <code>data-data</code> 指定初始值。
            input.form-control(bx-name='components/taginput' data-data="['foo', 'bar', 'baz']")
        div
            h3.fontsize-16 通过 HTML 属性 <code>data-placeholder</code> 指定描述预期值的简短提示。</p>
            input.form-control(bx-name='components/taginput' data-placeholder='输入几个字符试试')
        div
            h3.fontsize-16 可以限制词条的个数。
            input.form-control(bx-name='components/taginput' data-limit=3)
        div
            h3.fontsize-16 不允许增加重复值。
            input.form-control(bx-name='components/taginput' data-limit=3 data-same='false')
        div
            h3.fontsize-16 设置属性 <code>data-suggest="false"</code> 可以关闭 Suggest 组件。
            input.form-control(bx-name='components/taginput' data-suggest='false')
        //- 启动
        script.
            require(['brix/loader', 'jquery', 'underscore', 'mock', 'highlightjs'], function(Loader, $, _, Mock, hljs) {
                window.Loader = Loader
                Loader.boot(function() {
                    $('iframe', top.document).height($(document.body).outerHeight())
                    $(document.body).find('pre code').each(function(index, code) {
                        hljs.highlightBlock(code)
                    })
                    var data = Mock.mock({
                        'list|5-100': ['@NAME', 'N@NATURAL']
                    }).list
                    var instances = Loader.query('components/taginput')
                    instances.on('change.taginput', function(event, data, action, value) {
                        console.log(event, data, action, value)
                    })
                    _.each(instances, function(taginput, index) {
                        taginput.on('change.suggest.input', function(event, value) {
                            if (!event.namespace) return
                            // if (!value) taginput.suggest.data([])
                            taginput.suggest.data(
                                _.difference(
                                    _.filter(data, function(item, index) {
                                        return ('' + item).indexOf(value) !== -1
                                    })
                                    , taginput.val()
                                )
                            )
                        })
                    })
                })
            })
