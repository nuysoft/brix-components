doctype html
html
    head
        include ../../doc/head.pug
        style.
            .dropdown[data-moduleid] {
                margin-right: 10px;
                margin-bottom: 10px;
            }
    body
        //- 示例
        div
            h3.fontsize-16 直接在 <code>&lt;select&gt;</code> 节点上附加 <code>bx-name="components/dropdown"</code>。
            select(bx-name='components/dropdown')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-value='2')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-value='true')
                option(value='') Action
                option(value="true") Another action
                option(value="false") Something else here
            div.predefined
        div
            h3.fontsize-16 支持 <code>&lt;optgroup&gt;</code>。
            select(bx-name='components/dropdown')
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                optgroup(label='optgroup 3')
                    option(value='5' selected) Something else here 5
                    option(value='6') Something else here 6
            div.predefined
        div
            h3.fontsize-16 如果已经有了 JSON 数据，可以直接配置到 <code>data-data</code> 属性上，支持 <code>optgroup</code>。
            select(bx-name='components/dropdown' data-data="[\
                    { label: 'Action',              value: 1                 },\
                    { label: 'Another action',      value: 2, selected: true },\
                    { label: 'Something else here', value: 3                 }\
                ]")
            select(bx-name='components/dropdown' data-data="[\
                    { label: 'optgroup 1', children: [ { label: 'Action',              value: 1 } ] },\
                    { label: 'optgroup 2', children: [ { label: 'Another action',      value: 2 } ] },\
                    { label: 'optgroup 3', children: [ { label: 'Something else here', value: 3 } ] },\
                ]")
            div.predefined
        div
            h3.fontsize-16 可以在事件 <code>change.dropdown</code> 中对选中的值进行修正。
            select#conflict(bx-name='components/dropdown')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            div.predefined
        script.
            require(['jquery', 'brix/loader'], function($, Loader) {
                Loader.boot(function(){
                    var conflict = Loader.query($('#conflict'))[0]
                    conflict.on('change.dropdown', function(event, extra) {
                        if (extra.value == '3') {
                            event.component.val('1')
                        }
                    })
                })
            })
        div
            h3.fontsize-16 支持分隔线 <code>&lt;option class="divider"&gt;</code>。
            select(bx-name='components/dropdown')
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                option.divider
                optgroup(label='optgroup 3')
                    option(value='5') Something else here 5
                    option(value='6') Something else here 6
            div.predefined
        div
            h3.fontsize-16 支持搜索框 <code>data-searchbox="true|enter"</code>。详细说明见下方的配置项 <code>searchbox</code>。
            select(bx-name='components/dropdown' data-searchbox="true" bx-search="filter")
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                optgroup(label='optgroup 3')
                    option(value='5') Something else here 5
                    option(value='6') Something else here 6
            select(bx-name='components/dropdown' data-searchbox="enter" bx-search="filter")
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                optgroup(label='optgroup 3')
                    option(value='5') Something else here 5
                    option(value='6') Something else here 6
            div.predefined
        div
            h3.fontsize-16 支持 Popover <code>data-popover="true|width"</code>。
            select(bx-name='components/dropdown' data-popover="true")
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                optgroup(label='optgroup 3')
                    option(value='5') Something else here 5
                    option(value='6') Something else here 6
            select(bx-name='components/dropdown' data-popover="200")
                optgroup(label='optgroup 1')
                    option(value='1') Action 1
                    option(value='2') Action 2
                optgroup(label='optgroup 2')
                    option(value='3') Another action 3
                    option(value='4') Another action 4
                optgroup(label='optgroup 3')
                    option(value='5') Something else here 5
                    option(value='6') Something else here 6
            div.predefined
        div
            h3.fontsize-16 支持设置宽度 <code>data-width="width"</code>。
            select(bx-name='components/dropdown' data-width='100')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-width='100px')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-width='100%')
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            div.predefined
        div
            h3.fontsize-16 支持设置两端对齐 <code>data-justify="true"</code>。
            select(bx-name='components/dropdown' data-width='100' data-justify="true")
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-width='100px' data-justify="true")
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            select(bx-name='components/dropdown' data-width='100%' data-justify="true")
                option(value="1") Action
                option(value="2") Another action
                option(value="3") Something else here
            div.predefined
        div
            h3.fontsize-16 支持多选 <code>multiple</code>
            select(bx-name='components/dropdown' data-value='[1,2,3]' multiple)
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            div.predefined
        div
            h3.fontsize-16 支持多选 <code>multiple</code>，并排除某个选项
            select(bx-name="components/dropdown-debug" data-value="[1]" multiple data-excluded="['']")
                option(value="") Please
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            select(bx-name="components/dropdown-debug" data-value="1" multiple data-excluded="['']")
                option(value="") Please
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            select(bx-name="components/dropdown-debug" data-value="['']" multiple data-excluded="['']")
                option(value="") Please
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            select(bx-name="components/dropdown-debug" data-value="" multiple data-excluded="['']")
                option(value="") Please
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            div.predefined
            //- div.predefined
            //- select(bx-name="components/dropdown-debug" data-value="[]" multiple data-excluded="['']")
            //-     option(value="") Please
            //-     option(value=1) Action
            //-     option(value=2) Another action
            //-     option(value=3) Something else here
            //- div.predefined
            //- select(bx-name="components/dropdown-debug" data-value="1" multiple data-excluded="['']")
            //-     option(value="") Please
            //-     option(value=1) Action
            //-     option(value=2) Another action
            //-     option(value=3) Something else here
            //- div.predefined
        div
            h3.fontsize-16 多选 + Popover + Searchbox
            select(bx-name='components/dropdown' multiple data-value='[1,2,3]' data-searchbox="true" bx-search="filter" data-popover='200')
                option(value=1) Action
                option(value=2) Another action
                option(value=3) Something else here
            div.predefined
        //- 启动
        include ../../doc/boot.pug
        script.
            require(['brix/loader', 'jquery'], function(Loader, $) {
                Loader.boot(function() {
                    //- $('select').show().css('visibility', 'visible')
                    var instances = Loader.query('components/dropdown')
                    instances.on('change.dropdown', function(event, extra){
                        //- event.preventDefault();
                        console.log(event.type, event.namespace, extra)
                    })
                })
            })
